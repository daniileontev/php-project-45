#!/usr/bin/env php
<?php

$autoloadPath1 = __DIR__ . '/../../../autoload.php';
$autoloadPath2 = __DIR__ . '/../vendor/autoload.php';

if (file_exists($autoloadPath1)) {
    require_once $autoloadPath1;
} else {
    require_once $autoloadPath2;
}

function numCheck($number): bool
{
    if ($number % 2 == 0) {
        return true;
    } else {
        return false;
    }
}


echo("Welcome to the Brain Games!\n");
echo("May I have your name? ");
$name = trim(fgets(STDIN));
echo "Hello, {$name}!\n";
echo('Answer "yes" if the number is even, otherwise answer "no".' . "\n");

$isCorrect = true;
$correctAnswerCount = 0;
while ($isCorrect && $correctAnswerCount < 3) {
    $numGenerate = mt_rand(1, 100);
    echo("Question: {$numGenerate}\n");
    $userAnswer = trim(fgets(STDIN));
    echo("Your answer: {$userAnswer}\n");
    if (!numCheck($numGenerate) && $userAnswer === 'no') {
        echo "Correct!\n";
        $correctAnswerCount++;
    } elseif (numCheck($numGenerate) && $userAnswer === 'yes') {
        echo "Correct!\n";
        $correctAnswerCount++;
    } else {
        $isCorrect = false;
        echo "'{$userAnswer}' is the wrong answer ;(. The correct answer was"
            . (!numCheck($numGenerate) ? ' no' : ' yes') . ".\n"
            . "Let's try again, {$name}!\n";
    }
    if ($correctAnswerCount === 3) {
        $isCorrect = false;
        echo "Congratulations, {$name}!\n";
    }
}
